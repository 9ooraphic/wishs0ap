<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wishlist</title>
    <link rel="stylesheet" href="assets/css/style2.css">
    
</head>
<body>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";
      
        const firebaseConfig = {
          apiKey: "AIzaSyBqFI869fNpWOLI5GKzYBmPlyIOdPua0VM",
          authDomain: "soap-beb4d.firebaseapp.com",
          databaseURL: "https://soap-beb4d-default-rtdb.firebaseio.com",
          projectId: "soap-beb4d",
          storageBucket: "soap-beb4d.firebasestorage.app",
          messagingSenderId: "937077807177",
          appId: "1:937077807177:web:1ccb0e2226059b88570798",
          measurementId: "G-LMR6KHYTHN"
        };
      
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
      
        function loadWishes() {
            const wishContainer = document.getElementById("wish-container");
            const wishesRef = ref(db, "wishes");
            const soapButton = document.querySelector(".soap-button"); // ğŸŸ¢ ë¹„ëˆ„ ë²„íŠ¼ ê°€ì ¸ì˜¤ê¸°
      
            onValue(wishesRef, (snapshot) => {
                wishContainer.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
            // ğŸŸ¢ ë¹„ëˆ„ ë²„íŠ¼ ìœ„ì¹˜ ê°ì§€
            const buttonRect = soapButton.getBoundingClientRect();
            const buttonLeft = buttonRect.left;
            const buttonTop = buttonRect.top;
            const buttonRight = buttonRect.right;
            const buttonBottom = buttonRect.bottom;

                
                snapshot.forEach((childSnapshot) => {
                    let wishText = childSnapshot.val(); // ì†Œì› í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
      
                    let wishBubble = document.createElement("div");
                    wishBubble.classList.add("wish-bubble");
                    wishBubble.textContent = wishText;

                    
      
                    // ëœë¤ ìœ„ì¹˜ ì„¤ì • (í™”ë©´ ë°–ìœ¼ë¡œ ì•ˆ ë‚˜ê°€ê²Œ)
                    let x = Math.random() * 80 + 10;
                    let y = Math.random() * 80 + 10;
                    
      
                    wishBubble.style.left = `${x}vw`;
                    wishBubble.style.top = `${y}vh`;

                     // ğŸš€ ëœë¤ ì• ë‹ˆë©”ì´ì…˜ ì†ë„ ì„¤ì • (4~8ì´ˆ ì‚¬ì´)
            let randomDuration = Math.random() * 3 + 2; // 4s ~ 8s
            wishBubble.style.animation = `floatAnimation ${randomDuration}s infinite ease-in-out alternate`;

            // ğŸš€ ëœë¤í•œ ë°©í–¥ ì„¤ì •
            let randomDirectionX = Math.random() > 0.5 ? 1 : -1;
            let randomDirectionY = Math.random() > 0.5 ? 1 : -1;
            wishBubble.style.setProperty('--directionX', randomDirectionX);
            wishBubble.style.setProperty('--directionY', randomDirectionY);
      
                    wishContainer.appendChild(wishBubble);
                });
            });
        }
      
        // âœ… í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì†Œì› ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        window.onload = loadWishes;
      </script>
      
    <div class="video-background">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/3PmVJQUCm4E?enablejsapi=1&autoplay=1&mute=1&controls=0&modestbranding=1&rel=0&showinfo=0&fs=0&disablekb=1"
    id="youtube-video"
    frameborder="0" 
    allow="autoplay; encrypted-media"
    allowfullscreen></iframe>
   
</div>


    <h1></h1>
    <div id="wish-container"></div> <!-- ì†Œì›ì´ ëœë¤í•˜ê²Œ ë– ë‹¤ë‹ ì»¨í…Œì´ë„ˆ -->
</div>
<div class="soap-button">
<a href="/index.html">
    <img id="soap-icon" src="assets/images/soapbutton.png" alt="ë¹„ëˆ„ ë²„íŠ¼">
</a>

</body>
<script>
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('youtube-video', {
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        event.target.playVideo();
        event.target.seekTo(20); // 20ì´ˆë¶€í„° ì‹œì‘
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
            setInterval(() => {
                let currentTime = player.getCurrentTime();
                if (currentTime >= 64) { // 106ì´ˆ(1ë¶„ 46ì´ˆ)ì— ë„ë‹¬í•˜ë©´
                    player.seekTo(20); // 20ì´ˆë¡œ ë‹¤ì‹œ ì´ë™
                }
            }, 1000);
        }
    }
</script>
<script src="https://www.youtube.com/iframe_api"></script>


</html>
